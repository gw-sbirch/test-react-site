(this["webpackJsonpglasswall-file-type-detection"]=this["webpackJsonpglasswall-file-type-detection"]||[]).push([[0],{165:function(e,t,a){},282:function(e,t,a){e.exports=a.p+"static/media/logo.f2df34b5.svg"},283:function(e,t,a){e.exports=a.p+"static/media/api.980d9789.yaml"},291:function(e,t,a){e.exports=a(751)},296:function(e,t,a){},305:function(e,t){},307:function(e,t){},751:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(46),c=a.n(l),i=(a(296),a(27)),o=(a(165),a(71)),s=a.n(o),u=a(160);var m=function(e){var t=Object(n.useState)(!1),a=Object(i.a)(t,2),l=a[0],c=a[1],o=Object(n.useState)(!1),s=Object(i.a)(o,2),u=s[0],m=s[1],f=function(e){e.preventDefault(),e.stopPropagation()},p=function(e){e.preventDefault(),e.stopPropagation(),m(u++),e.dataTransfer.items&&e.dataTransfer.items.length>0&&c(!0)},d=function(e){e.preventDefault(),e.stopPropagation(),m(u--),0===u&&c(!1)},E=function(t){if(t.preventDefault(),t.stopPropagation(),c(!1),t.dataTransfer.files&&t.dataTransfer.files.length>0){e.handleDrop(t.dataTransfer.files);try{t.dataTransfer.clearData()}catch(a){}m(0)}},v=r.a.createRef();return Object(n.useEffect)((function(){var e=v.current;return e.addEventListener("dragenter",p),e.addEventListener("dragleave",d),e.addEventListener("dragover",f),e.addEventListener("drop",E),function(){e.removeEventListener("dragenter",p),e.removeEventListener("dragleave",d),e.removeEventListener("dragover",f),e.removeEventListener("drop",E)}}),[]),r.a.createElement("div",{className:"drop-border",ref:v},l&&r.a.createElement("div",{className:"drop-border-dragging"}),e.children)},f=a(289);a(297);var p=function(e){var t,a=e.fileName,n=e.fileExtension,l=e.fileType,c=e.fileSize;return t=a.length>40?a.substring(0,40):a,r.a.createElement("tr",{className:n!==l?"type-danger":""},r.a.createElement(f.a,{content:a},r.a.createElement("td",null,a===t?a:"".concat(t,"...").concat(n))),r.a.createElement("td",null,n),r.a.createElement("td",null,l),r.a.createElement("td",null,c))};var d=function(e){return r.a.createElement("section",{className:"results-section"},r.a.createElement("div",{className:"file-attributes table-container"},r.a.createElement("h1",{className:"table-header"},"File Attributes"),r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",{className:"header-row"},r.a.createElement("th",null,"File Name"),r.a.createElement("th",null,"Declared File Type"),r.a.createElement("th",null,"Actual File Type"),r.a.createElement("th",null,"File Size"))),r.a.createElement("tbody",null,e.results&&e.results.map((function(e,t){return r.a.createElement(p,Object.assign({key:"result-".concat(t)},e))}))))))},E=function(e,t){var a=new FormData;return a.append("file",t),console.log(t),fetch("https://xugc5ib648.execute-api.eu-west-1.amazonaws.com/Prod/api/FileTypeDetection",{method:"POST",body:a,headers:{"x-api-key":e}})};a(300);var v=function(e){return e.loading?r.a.createElement("div",{className:"spinner-container"},r.a.createElement("div",{className:"spinner"})):null},h=a(753),g=a(281),b=a.n(g),y=function(e){var t=new b.a;return new Promise((function(a,n){t.loadAsync(e).then((function(e){var t=Object.values(e.files),r=[];Array.from(t).forEach(function(){var e=Object(u.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.dir||r.push(t.async("blob").then((function(e){return e.name=t.name,e})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Promise.all(r).then(a,n)}),n)}))};var w=function(e){var t=Object(n.useState)(null),a=Object(i.a)(t,2),l=a[0],c=a[1],o=Object(n.useState)(!1),f=Object(i.a)(o,2),p=f[0],g=f[1],b=Object(n.useState)(!1),w=Object(i.a)(b,2),j=w[0],N=w[1];return r.a.createElement("div",{className:"app-body"},r.a.createElement("h1",null,"Drag and drop files to determine their file type. Files in Zip's will be determined separately."),r.a.createElement(m,{handleDrop:function(t){N(!0),g(!1),c([]);var a=[],n=[],r=function(t,a){return new Promise((function(n){var r={fileName:t.name,fileExtension:a,fileType:"Unknown",fileSize:0},l=function(){var a=Object(u.a)(s.a.mark((function a(){var l,o;return s.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,E(e.apiKey,t);case 3:return l=a.sent,a.next=6,c(l);case 6:o=a.sent,i(o,t),a.next=13;break;case 10:a.prev=10,a.t0=a.catch(0),console.log(a.t0);case 13:n(r);case 14:case"end":return a.stop()}}),a,null,[[0,10]])})));return function(){return a.apply(this,arguments)}}(),c=function(e){return 200!==e.status?(console.log(e),{fileType:"Error",fileSize:0,status:e.status}):e.json()},i=function(e){return r.fileType=e.fileType.toLowerCase(),r.fileSize=e.fileSize,e};l()}))};Array.from(t).forEach((function(e){var t=e.name.split(".").pop().toLowerCase();if("zip"===t){var l=y(e).then((function(a){a.forEach((function(a){t=a.name.split(".").pop().toLowerCase(),a.name="["+e.name+"] -> "+a.name,n.push(r(a,t))}))}),(function(a){console.log(a),n.push(r(e,t))}));a.push(l)}else n.push(r(e,t))})),Promise.all(a).then((function(e){Promise.all(n).then((function(e){c(e),g(!0),N(!1)}))}),(function(e){console.log(e)}))}},r.a.createElement("div",{className:"loading-container"},r.a.createElement(v,{key:6,loading:j}))),r.a.createElement(h.a,{in:p,timeout:{enter:500,exit:500},classNames:"results"},r.a.createElement(r.a.Fragment,null,p&&r.a.createElement(d,{results:l}))))},j=a(282),N=a.n(j),O=function(){return r.a.createElement("div",{className:"app-header"},r.a.createElement("div",{className:"logo"},r.a.createElement("img",{src:N.a,alt:"Logo",height:"90"})))};var x=function(){var e=Object(n.useState)("v1j1jXSdPo8Z7iRW4H34va89ho9mt6KV5y9zezVn"),t=Object(i.a)(e,2),a=t[0],l=t[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"app filedrop"},r.a.createElement("input",{type:"text",placeholder:"Api Key",onInput:function(e){l(e.target.value)},hidden:!0}),r.a.createElement(w,{apiKey:a})))},T=a(283),S=a.n(T),L=a(284),P=a.n(L),D=(a(749),function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(O,null),r.a.createElement(P.a,{url:window.location.origin+S.a}))}),F=a(287),z=a(35);c.a.render(r.a.createElement((function(){return r.a.createElement(F.a,{basename:"/"},r.a.createElement(z.a,{path:"/drop"},r.a.createElement(x,null)),r.a.createElement(z.a,{path:"/",exact:!0},r.a.createElement(D,null)))}),null),document.getElementById("root"))}},[[291,1,2]]]);
//# sourceMappingURL=main.b28c3a3f.chunk.js.map